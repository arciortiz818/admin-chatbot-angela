(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d77ea5b6"],{"5ced":function(t,a,e){},"7db0":function(t,a,e){"use strict";var r=e("23e7"),n=e("b727").find,o=e("44d2"),i=e("ae40"),s="find",c=!0,u=i(s);s in[]&&Array(1)[s]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!u},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},bb51:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col"},[e("p",{staticClass:"col-12 title-section"},[t._v("Estadisticas de Env√≠o")]),e("div",{staticClass:"col-12",staticStyle:{display:"inline-flex"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.typeQuery,expression:"typeQuery"}],staticClass:"form-control mr-4 select-typequery",attrs:{id:"exampleFormControlSelect1"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.typeQuery=a.target.multiple?e:e[0]}}},[e("option",[t._v("Diario")]),e("option",[t._v("Mensual")])]),e("button",{staticClass:"btn btn-dark btn-secondary",staticStyle:{background:"#1ab187"},on:{click:function(a){return t.consultar()}}},[this.isLoading?e("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" Consultar ")]),e("button",{staticClass:"btn btn-dark btn-secondary ml-2",staticStyle:{background:"#1ab187"},attrs:{disabled:!t.dataExport||t.dataExport&&0==t.dataExport.length},on:{click:function(a){return t.exportDataExcel()}}},[t._v(" Descargar Excel ")])])])]),e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card card-barchart"},[e("bar-chart",{ref:"barChart",staticClass:"bar-chart"})],1)])])])},n=[],o=(e("99af"),e("7db0"),e("d81d"),e("2909")),i=(e("96cf"),e("1da1")),s=e("4360"),c=e("c1df"),u=e.n(c),d=e("3fdc"),l=e("8bb2"),h=(e("db49"),e("1146")),m=e.n(h),f={name:"Home",components:{BarChart:d["a"]},data:function(){return{dateStart:"",dateEnd:"",typeQuery:"Diario",chartData:{},chartOptions:{},dataExport:null}},computed:{isLoading:function(){return this.$store.state.loadingData}},created:function(){this.$store.commit("SET_LAYOUT","principal-layout")},mounted:function(){this.dateStart=u()().subtract(30,"d").format("YYYY-MM-DD"),this.dateEnd=u()().format("YYYY-MM-DD"),this.consultar()},methods:{consultar:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.dataExport=null,t.$store.commit("SET_LOADING_DATA",!0),a.t0=t.typeQuery,a.next="Mensual"===a.t0?5:9;break;case 5:return t.dateStart=u()().subtract(12,"months").format("YYYY-MM-DD"),t.dateEnd=u()().format("YYYY-MM-DD"),t.consultarMensual(),a.abrupt("break",13);case 9:return t.dateStart=u()().subtract(30,"d").format("YYYY-MM-DD"),t.dateEnd=u()().format("YYYY-MM-DD"),t.consultarDiario(),a.abrupt("break",13);case 13:case"end":return a.stop()}}),a)})))()},consultarDiario:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=[],a.next=3,s["a"].dispatch("getReportDaily",{dateStart:t.dateStart,dateEnd:t.dateEnd});case 3:e=a.sent,t.dataExport=e,e=t.formatDaily(e),t.$store.commit("SET_LOADING_DATA",!1),t.graficar(e,"daily");case 8:case"end":return a.stop()}}),a)})))()},consultarMensual:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=[],a.next=3,s["a"].dispatch("getReportMonthly",{dateStart:t.dateStart,dateEnd:t.dateEnd});case 3:e=a.sent,t.dataExport=e,e=t.formatMonthly(e),t.graficar(e,"monthly"),t.$store.commit("SET_LOADING_DATA",!1);case 8:case"end":return a.stop()}}),a)})))()},formatDaily:function(t){var a=this.dateStart,e=[];while(u()(a)<u()(this.dateEnd))a=u()(a).add(1,"days").format("YYYY-MM-DD"),e.push({date:a,count:0});var r=e.map((function(a){var e=t.find((function(t){return t.date==a.date}));return e?{date:a.date,count:e.count}:{date:a.date,count:0}}));return r},formatMonthly:function(t){var a=u()(this.dateStart).format("YYYY-MM-DD"),e=[];while(u()(a)<u()(this.dateEnd))a=u()(a).add(1,"months").format("YYYY-MM-DD"),e.push({month:a.substring(0,7),count:0});var r=e.map((function(a){var e=t.find((function(t){return t.month==a.month}));return e?{month:Object(l["getAbrevMonth"])(a.month)+"-"+a.month.substring(0,4),count:e.count}:{month:Object(l["getAbrevMonth"])(a.month)+"-"+a.month.substring(0,4),count:0}}));return r},graficar:function(t,a){var e=t.map((function(t){return t.month?t.month:t.date?t.date:void 0})),r=t.map((function(t){return t.count})),n=t.map((function(t){return Object(l["dame_color_aleatorio"])()})),i=Math.max.apply(Math,Object(o["a"])(r));this.chartData={labels:e,datasets:[{data:r,backgroundColor:n,borderWidth:1,barThickness:25}]},this.chartOptions={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},layout:{padding:{left:20,right:20,top:50,bottom:20}},scales:{yAxes:[{ticks:{suggestedMin:0,suggestedMax:1.1*i,beginAtZero:!0}}]}},this.$refs.barChart&&this.$refs.barChart.render(this.chartData,this.chartOptions)},exportDataExcel:function(){var t=this.dataExport.map((function(t){return{fecha:t.date?t.date:t.month,cantidad:t.count}})),a=m.a.utils.json_to_sheet(t),e=m.a.utils.book_new(),r="angela_env_".concat(u()(this.dateStart).format("DDMMYYYY"),"_").concat(u()(this.dateEnd).format("DDMMYYYY"));m.a.utils.book_append_sheet(e,a,r),m.a.writeFile(e,"".concat(r,".xlsx"))}}},p=f,b=(e("cccb"),e("2877")),v=Object(b["a"])(p,r,n,!1,null,null,null);a["default"]=v.exports},cccb:function(t,a,e){"use strict";var r=e("5ced"),n=e.n(r);n.a}}]);
//# sourceMappingURL=chunk-d77ea5b6.70dbabb4.js.map