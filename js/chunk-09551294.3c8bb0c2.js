(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09551294"],{"4de4":function(t,a,e){"use strict";var n=e("23e7"),r=e("b727").filter,i=e("1dde"),s=e("ae40"),o=i("filter"),c=s("filter");n({target:"Array",proto:!0,forced:!o||!c},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"75d2":function(t,a,e){"use strict";var n=e("7eb1"),r=e.n(n);r.a},"7eb1":function(t,a,e){},f453:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[t._m(0),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-4"},[t._m(1),e("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"dateIniPicker"},model:{value:t.dateStart,callback:function(a){t.dateStart=a},expression:"dateStart"}})],1),e("div",{staticClass:"col-4"},[t._m(2),e("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"dateEndPicker"},model:{value:t.dateEnd,callback:function(a){t.dateEnd=a},expression:"dateEnd"}})],1)]),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col"},[e("button",{staticClass:"btn btn-dark btn-secondary",staticStyle:{background:"#1ab187"},on:{click:function(a){return t.consultar()}}},[this.isLoading?e("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" Consultar ")]),e("button",{staticClass:"btn btn-dark btn-secondary ml-2",staticStyle:{background:"#1ab187"},attrs:{disabled:!t.dataExport||t.dataExport&&0==t.dataExport.length},on:{click:function(a){return t.exportDataExcel()}}},[t._v(" Descargar Excel ")])])]),e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card card-barchart"},[this.isLoading?e("div",{staticClass:"d-flex justify-content-center spinner-loading"},[t._m(3)]):t._e(),e("bar-chart",{ref:"barChart",staticClass:"bar-chart"})],1)])])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row mt-5"},[e("div",{staticClass:"col"},[e("p",{staticClass:"col-12 title-section"},[t._v(" Estadisticas de Uso Chatbot por Intenciones ")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"dateIniPicker"}},[e("b",[t._v("Desde")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{for:"dateEndPicker"}},[e("b",[t._v("Hasta")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"spinner-border spinner-border-lg",staticStyle:{width:"5rem",height:"5rem"},attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],i=(e("99af"),e("4de4"),e("d81d"),e("2909")),s=(e("96cf"),e("1da1")),o=e("4360"),c=e("c1df"),d=e.n(c),l=e("3fdc"),u=e("8bb2"),f=e("1146"),b=e.n(f),h={name:"Home",components:{BarChart:l["a"]},data:function(){return{dateStart:"",dateEnd:"",typeQuery:"Diario",chartData:{},chartOptions:{},dataExport:null}},computed:{isLoading:function(){return this.$store.state.loadingData}},created:function(){this.$store.commit("SET_LAYOUT","principal-layout")},mounted:function(){this.dateStart=d()().subtract(1,"d").format("YYYY-MM-DD"),this.dateEnd=d()().subtract(1,"d").format("YYYY-MM-DD"),this.consultar()},methods:{consultar:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.dataExport=null,!(t.dateStart>t.dateEnd)){a.next=4;break}return t.$toastr.e("Rango de fechas no v√°lido."),a.abrupt("return");case 4:return t.$store.commit("SET_LOADING_DATA",!0),e=[],a.next=8,o["a"].dispatch("getReportIntents",{dateStart:t.dateStart,dateEnd:t.dateEnd});case 8:e=a.sent,t.dataExport=e,t.graficar(e);case 11:case"end":return a.stop()}}),a)})))()},graficar:function(t){console.log("graficar",t);var a=t.filter((function(t){return"Toma Muestras"!=t.intent&&"Toma Muestras Covid"!=t.intent&&"Solicitud Citas"!=t.intent&&"Resultados Domicilio"!=t.intent&&"Cancelar Citas"!=t.intent})).map((function(t){return t.intent})),e=t.filter((function(t){return"Toma Muestras"!=t.intent&&"Toma Muestras Covid"!=t.intent&&"Solicitud Citas"!=t.intent&&"Resultados Domicilio"!=t.intent&&"Cancelar Citas"!=t.intent})).map((function(t){return t.count})),n=t.map((function(t){return Object(u["dame_color_aleatorio"])()})),r=Math.max.apply(Math,Object(i["a"])(e));this.chartData={labels:a,datasets:[{data:e,backgroundColor:n,borderWidth:1,barThickness:25}]},this.chartOptions={responsive:!0,maintainAspectRatio:!1,legend:{display:!1},layout:{padding:{left:20,right:20,top:50,bottom:20}},scales:{yAxes:[{ticks:{suggestedMin:0,suggestedMax:1.1*r,beginAtZero:!0}}]}},this.$refs.barChart&&this.$refs.barChart.render(this.chartData,this.chartOptions)},exportDataExcel:function(){var t=this.dataExport.filter((function(t){return"Toma Muestras"!=t.intent&&"Toma Muestras Covid"!=t.intent&&"Solicitud Citas"!=t.intent&&"Resultados Domicilio"!=t.intent&&"Cancelar Citas"!=t.intent})).map((function(t){return{intencion:t.intent,cantidad:t.count}})),a=b.a.utils.json_to_sheet(t),e=b.a.utils.book_new(),n="angela_inten_".concat(d()(this.dateStart).format("DDMMYYYY"),"_").concat(d()(this.dateEnd).format("DDMMYYYY"));b.a.utils.book_append_sheet(e,a,n),b.a.writeFile(e,"".concat(n,".xlsx"))}}},m=h,p=(e("75d2"),e("2877")),v=Object(p["a"])(m,n,r,!1,null,null,null);a["default"]=v.exports}}]);
//# sourceMappingURL=chunk-09551294.3c8bb0c2.js.map